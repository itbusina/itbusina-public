name: IT BUSINA TESTS
tests:
  - url: https://itbusina.com/products/apibee
    name: Health check
  - url: https://itbusina.com/products/apibee/contact
    name: Health check
  - url: https://docs.testlemon.com/terms-of-use/
    name: Health check
  - url: https://docs.testlemon.com/privacy-policy/
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/apibee-portal
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/testlemon
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/apibee-api
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/apibee-mock
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/leadersboard
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/sonarqube-wallboard
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/jenkins-wallboard
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/bamboo-wallboard
    name: Health check
  - url: https://hub.docker.com/v2/repositories/itbusina/dependencies-dashboard
    name: Health check
  - url: https://itbusina.com
    name: SSL expiration after 30d, Domain name expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
    - domain-expiration-after: 30d
  - url: http://itbusina.net
    name: http://itbusina.net returns 301, domain name expiration after 30d
    headers:
    - 'User-Agent:apibee'
    validators:
    - is-successful: false
    - status-code: 301
    - domain-expiration-after: 30d
  - url: https://portal.apibee.itbusina.com/health
    name: ApiBee Portal is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://api.apibee.itbusina.com/health
    name: ApiBee API is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://apibee-mock.itbusina.com/health
    name: ApiBee Mock is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://functions.apibee.itbusina.com/api/health
    name: ApiBee Functions SSL expiration after 30d
    validators:
    - ssl-expiration-after: 30d
  - url: https://functions.apibee.itbusina.com/api/health
    name: ApiBee functions 'Health' is healthy
    validators:
    - is-successful: true
  - url: https://functions.apibee.itbusina.com/api/domain?q=itbusina.com
    name: ApiBee functions 'Domain' is healthy
    validators:
    - is-successful: true
  - url: https://docs.testlemon.com
    name: TestLemon Documentaiton is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://leadersboard.itbusina.com
    name: IT Busina Leadersboard is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://demo-sonar.itbusina.com
    name: IT Busina Demo Sonar is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://demo-bamboo.itbusina.com
    name: IT Busina Demo Bamboo CI is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://demo-dependencies.itbusina.com
    name: IT Busina Demo Dependencies is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://demo-jenkins.itbusina.com/
    name: IT Busina Demo Jenkins is healthy and SSL expiration after 30d
    validators:
    - is-successful: true
    - ssl-expiration-after: 30d
  - url: https://itbusina.com
    name: All pages containt 'itbusina', no pages contain 'itbusino'
    validators:
    - sitemap-each-body-contains: "itbusina"
    - sitemap-each-body-not-contains: "itbusino"
  - url: https://itbusina.com
    name: DMARC record exists, single record and strict policy enabled
    validators:
    - dns-dmarc-exists: true
    - dns-dmarc-single-record: true
    - dns-dmarc-strict-policy: true
  - url: https://itbusina.com
    name: SPF record exists
    validators:
    - dns-spf-exists: true
  - url: https://itbusina.com
    name: DKIM record exists
    validators:
    - dns-dkim-exists: true
  - url: https://www.testlemon.com
    name: TestLemon landing site is up
  - url: https://testlemon.com
    name: TestLemon redirect to www
    validators:
    - status-code: 301
  - url: https://itbusina.com
    name: DNS config tests
    validators:
    - dns-record-exists: "A:@:35.71.142.77"
    - dns-record-exists: "A:@:52.223.52.2"
    - dns-record-exists: "A:apibee:15.197.225.128"
    - dns-record-exists: "A:apibee:3.33.251.168"
    - dns-record-exists: "NS:@:ns51.domaincontrol.com."
    - dns-record-exists: "NS:@:ns52.domaincontrol.com."
    - dns-record-exists: "TXT:@:openai-domain-verification=dv-QcsNbSXgPDxhulMtSm9jRlnZ"
    - dns-record-exists: "TXT:@:seobility=56280a0d72a7d70133c1ed7a3add3d63"
    - dns-record-exists: "TXT:@:google-site-verification=DHYt7xmEfOvLAacbT-YM_JZaXvrJvyytpyT9K1hS2Ek"
    - dns-record-exists: "TXT:@:google-site-verification=UEO85xKZhz4ImEPheyMgnR2qZ8yr4jQA6kPRc3Z1byg"
    - dns-record-exists: "TXT:@:NETORGFT10816873.onmicrosoft.com"
    - dns-record-exists: "TXT:@:NETORGFT14523610.onmicrosoft.com"
    - dns-record-exists: "TXT:_gh-itbusina-o:beb592ffae"
    - dns-record-exists: "TXT:_gh-itbusina-o.www:d61853241b"
    - dns-record-exists: "TXT:_github-pages-challenge-itbusina:36dd2bf1b24e6ac5531843f19a3438"
    - dns-record-exists: "CNAME:api.apibee:apibee-api.azurewebsites.net."
    - dns-record-exists: "CNAME:apibee-mock:apibee-mock.azurewebsites.net."
    - dns-record-exists: "CNAME:demo-bamboo:itbusina-bamboo-demo.azurewebsites.net."
    - dns-record-exists: "CNAME:demo-dependencies:itbusina-dependencies-demo.azurewebsites.net."
    - dns-record-exists: "CNAME:demo-jenkins:itbusina-jenkins-demo.azurewebsites.net."
    - dns-record-exists: "CNAME:demo-sonar:itbusina-sonarqube-demo.azurewebsites.net."
    - dns-record-exists: "CNAME:functions.apibee:functions-apibee.azurewebsites.net."
    - dns-record-exists: "CNAME:leadersboard:itbusina-leadersboard.azurewebsites.net."
    - dns-record-exists: "CNAME:portal.apibee:apibee-portal.azurewebsites.net."
    - dns-record-exists: "CNAME:www:sites.framer.app."
  - url: https://itbusina.com
    name: Test https://itbusina.com Tls11, Tls12 and Tls13
    validators:
    - tls-version-equals: Tls13
    - tls-version-equals: Tls12
    - tls-version-not-equals: Tls11
  - url: https://testlemon.com
    name: Test https://testlemon.com Tls11, Tls12 and Tls13
    validators:
    - tls-version-equals: Tls13
    - tls-version-not-equals: Tls12
    - tls-version-not-equals: Tls11
  - url: https://itbusina.com
    name: No links to docs.apibee.itbusina.com
    validators:
    - sitemap-each-body-not-contains: docs.apibee.itbusina.com
  - url: https://itbusina.com
    name: No links to portal.apibee.itbusina.com
    validators:
    - sitemap-each-body-not-contains: portal.apibee.itbusina.com
